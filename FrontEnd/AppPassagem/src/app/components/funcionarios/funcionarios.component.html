<div class="container p-5">
  <div class="row">
    <div class="col-6 border border-light rounded p-5 shadow">

      <div class="btn-group mb-5">
        <button type="button" class="btn btn-light" (click)="selecionarFormulario('cadastro')">Cadastro</button>
        <button type="button" class="btn btn-light" (click)="selecionarFormulario('exclusao')">Exclusão</button>
        <button type="button" class="btn btn-light" (click)="selecionarFormulario('atualizar')">Atualizar</button>
        <button type="button" class="btn btn-light" (click)="selecionarFormulario('listar')">Listar</button>
        <button type="button" class="btn btn-light" (click)="selecionarFormulario('buscar')">Buscar</button>
      </div>

      <!-- formulario de cadastro -->
      <div *ngIf="formularioSelecionado === 'cadastro'">
        <h2>{{ tituloFormularioCadastro }}</h2>
        <form [formGroup]="formulario" (ngSubmit)="enviarFormulario()">
          <div class="form-group">
            <label>Nome</label>
            <input type="text" class="form-control form-control-sm" formControlName="nome" />
          </div>
          <div class="form-group">
            <label>Cargo</label>
            <input type="text" class="form-control form-control-sm" formControlName="cargo" />
          </div>
          <div class="form-group">
            <label>Trabalha em:</label>
            <select class="form-control form-control-sm" formControlName="aeroportoId">
              <option *ngFor="let aeroporto of aeroportos" [value]="aeroporto.id">
                {{ aeroporto.nome }} - {{ aeroporto.cidade }}
              </option>
            </select>
          </div>
          <div class="container">
            <div class="row">
              <div>
                <button type="submit" class="btn btn-sm btn-outline-secondary">
                  Salvar
                </button>
              </div>
              <div class="pl-1">
                <button type="button" class="btn btn-sm btn-light">Voltar</button>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div *ngIf="formularioSelecionado === 'exclusao'">
        <h2>{{ tituloFormularioExclusao }}</h2>
        <form [formGroup]="formularioExclusao">
          <div class="form-group">
            <label for="IdExclusao">ID do Funcionário:</label>
            <input type="number" id="IdExclusao" formControlName="Id" class="form-control form-control-sm"/>
          </div>
          <button (click)="excluirFuncionario()">Excluir</button>
        </form>
      </div>


      <div *ngIf="formularioSelecionado === 'atualizar'">
        <h2>{{ tituloFormularioAtualizar }}</h2>
        <form [formGroup]="formularioAtualizar" (ngSubmit)="atualizarFormulario()">
          <div class="form-group">
            <label>Id</label>
            <input type="text" class="form-control form-control-sm" formControlName="id" />
          </div>
          <div class="form-group">
            <label>Nome</label>
            <input type="text" class="form-control form-control-sm" formControlName="nome" />
          </div>
          <div class="form-group">
            <label>Cargo</label>
            <input type="text" class="form-control form-control-sm" formControlName="cargo" />
          </div>
          <div class="form-group">
            <label>Trabalha em:</label>
            <select class="form-control form-control-sm" formControlName="aeroportoId">
              <option *ngFor="let aeroporto of aeroportos" [value]="aeroporto.id">
                {{ aeroporto.nome }} - {{ aeroporto.cidade }}
              </option>
            </select>
          </div>
          <div class="container">
            <div class="row">
              <div>
                <button type="submit" class="btn btn-sm btn-outline-secondary">
                  Salvar
                </button>
              </div>
              <div class="pl-1">
                <button type="button" class="btn btn-sm btn-light">Voltar</button>
              </div>
            </div>
          </div>
        </form>
      </div>


      <div *ngIf="formularioSelecionado === 'listar'">
        <h2>Lista de Aeroportos</h2>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nome</th>
              <th>Cargo</th>
              <th>Aeroporto/Id</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let funcionario of result | async">
              <td>{{ funcionario.id }}</td>
              <td>{{ funcionario.nome }}</td>
              <td>{{ funcionario.cargo }}</td>
              <td>{{ funcionario.aeroportoId }}</td>
            </tr>
          </tbody>
        </table>
        <button type="button" class="btn btn-sm btn-light" (click)="selecionarFormulario('cadastro')">Voltar</button>
      </div>

      <!-- Adicione o formulário de busca no bloco HTML existente -->
      <div *ngIf="formularioSelecionado === 'buscar'">
        <h2>Buscar Funcionário por ID</h2>
        <form [formGroup]="formularioBusca" (ngSubmit)="buscarFuncionarioPorId()">
          <div class="form-group">
            <label for="idBusca">ID do Funcionário:</label>
            <input type="number" id="idBusca" formControlName="id" class="form-control form-control-sm" />
          </div>
          <button type="submit" class="btn btn-sm btn-outline-secondary">Buscar</button>
        </form>
      </div>

      <!-- Adicione a tabela de resultados -->
      <div *ngIf=" formularioSelecionado === 'buscar'">
        <h2>Lista de Funcionários</h2>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nome</th>
              <th>Cargo</th>
              <th>Aeroporto/Id</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let funcionario of resultBuscados | async">
              <td>{{ funcionario.id }}</td>
              <td>{{ funcionario.nome }}</td>
              <td>{{ funcionario.cargo }}</td>
              <td>{{ funcionario.aeroportoId }}</td>
            </tr>
          </tbody>
        </table>
        <button type="button" class="btn btn-sm btn-light" (click)="selecionarFormulario('cadastro')">Voltar</button>
      </div>
      
    </div>
  </div>
</div>